#!/bin/bash

# Update package lists
if ! sudo apt-get update; then
  echo "Error: failed to update package lists"
  exit 1
fi

# Check for available updates, including security updates
updates=$(sudo apt-get -s dist-upgrade | grep "^Inst" | grep -i "security")

if [[ -z "$updates" ]]; then
  echo "System is up to date"
else
  echo "The following security updates are available:"
  echo "-------------------------------------------"
  echo "$updates" | awk '{print $2, $3, $4}' | xargs apt-cache show | grep -E '^(Package|Version|Description)' | awk '{print "\t" $0}'
fi
